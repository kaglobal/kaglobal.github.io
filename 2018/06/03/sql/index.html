<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="kabai"><meta name="copyright" content="kabai"><meta name="generator" content="Hexo 5.1.1"><meta name="theme" content="hexo-theme-yun"><title>数据库sql相关 | Kblog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="none" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.19/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_stqaphw3j4.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link class="aplayer-style-marker" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><script class="aplayer-script-marker" src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js" defer></script><script class="meting-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1/dist/Meting.min.js" defer></script><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"root":"/","title":"卡白の客栈","version":"1.0.0","anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><meta name="description" content="sql语句操作入门">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库sql相关">
<meta property="og:url" content="http://yoursite.com/2018/06/03/sql/index.html">
<meta property="og:site_name" content="Kblog">
<meta property="og:description" content="sql语句操作入门">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/0.jpg">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/1.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/2.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/3.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/4.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/5.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/6.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/7.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/8.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/9.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/10.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/11.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/12.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/13.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/14.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/15.png">
<meta property="og:image" content="http://yoursite.com/2018/06/03/sql/welcome.jpg">
<meta property="article:published_time" content="2018-06-03T12:39:38.000Z">
<meta property="article:modified_time" content="2018-06-03T12:50:31.000Z">
<meta property="article:author" content="kabai">
<meta property="article:tag" content="sql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2018/06/03/sql/0.jpg"></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button sidebar-nav-active" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel sidebar-panel-active" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="kabai"><img width="96" loading="lazy" src="/Yun.png" alt="kabai"></a><div class="site-author-name"><a href="/about/">kabai</a></div><a class="site-name" href="/about/site.html">Kblog</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">2</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">6</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://shang.qq.com/wpa/qunwpa?idkey=c929e704022704d8cced9ec355d44a3fa7ad34aea12cef1de03d75d3d7d5b059" title="QQ 群" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/kaglobal" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/jizhideyunyoujun" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.douban.com/people/yunyoujun/" title="豆瓣" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=247102977" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/yunyoujun/" title="知乎" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/1579790" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/YunYouJun" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/elpsycn" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@yunyoujun.cn" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.now.sh/" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div></div><div class="sidebar-panel" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content">此文章未包含目录</div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/03/sql/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="kabai"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Kblog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">数据库sql相关</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2018-06-03 20:39:38" itemprop="dateCreated datePublished" datetime="2018-06-03T20:39:38+08:00">2018-06-03</time></div><div class="post-classify"><span class="post-category"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/java%E6%8A%80%E6%9C%AF/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">java技术</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/sql/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">sql</span></a></span></div><div class="post-author"><div class="author-avatar"><img src="https://www.gravatar.com/avatar/5955b9acb93c036f9780aef3c42de865?s=20&amp;d=https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2FYunYouJun%2Fcdn%2Fimg%2Favatar%2Fnone.jpg"></div><span class="author-name">kabai</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><img src="/2018/06/03/sql/0.jpg" class title="This is an example image" loading="lazy">
<p>数据类型        描述</p>
<p>integer(size)</p>
<p>int(size)</p>
<p>smallint(size)  </p>
<p>tinyint(size)    仅容纳整数。在括号内规定数字的最大位数。</p>
<p>decimal(size,d)</p>
<p>numeric(size,d)  容纳带有小数的数字。”size” 规定数字的最大位数。”d” 规定小数点右侧的最大位数。    </p>
<p>char(size)   容纳固定长度的字符串（可容纳字母、数字以及特殊字符）。在括号中规定字符串的长度。    </p>
<p>varchar(size)      容纳可变长度的字符串（可容纳字母、数字以及特殊的字符）。在括号中规定字符串的最大长度。</p>
<p>date(yyyymmdd)      容纳日期。</p>
<p><strong>SQL语句</strong></p>
<p><strong>Creat新建数据库</strong></p>
<p>CREATE DATABASE my_db</p>
<p><strong>Creat新建表</strong></p>
<p>CREATE TABLE 表名称 ( 列名称1 数据类型, 列名称2 数据类型, 列名称3 数据类型, …. )</p>
<p>CREATE TABLE Persons ( Id_P int NOT NULL, LastName varchar(255) NOT NULL, FirstName varchar(255), Address varchar(255), City varchar(255), <strong>PRIMARY KEY</strong> (Id_P) )</p>
<p><strong>Insert新增数据INSERT INTO  VALUES</strong></p>
<p><strong>插入一行新数据</strong></p>
<p>INSERT INTO 表名称 VALUES (值1, 值2,….)</p>
<p>INSERT INTO <code>user</code> VALUES (‘2’,’2’,’3’,’4’,’5’);</p>
<p><strong>插入指定列的新数据</strong></p>
<p>INSERT INTO table_name (列1, 列2,…) VALUES (值1, 值2,….)</p>
<p>INSERT INTO <code>user</code> (DDID) VALUES (‘3’);</p>
<img src="/2018/06/03/sql/1.png" class title="This is an example image" loading="lazy">

<p><strong>Update编辑数据UPDATE SET</strong></p>
<p>UPDATE 表名称 SET 列名称 = 新值 WHERE 列名称 = 某值</p>
<p>UPDATE <code>user</code> SET DDID = ‘21333’ WHERE userid=’1’</p>
<p><img src="/2018/06/03/sql/2.png" alt="img" loading="lazy"></p>
<p><strong>Delete删除数据</strong></p>
<p><strong>DELETE</strong> FROM 表名称 WHERE 列名称 = 值</p>
<p>DELETE FROM <code>user</code> WHERE userid =’1’</p>
<p><img src="/2018/06/03/sql/3.png" alt="img" loading="lazy"></p>
<p><strong>TRUNCATE TABLE 表名称</strong></p>
<p>TRUNCATE TABLE 表名称</p>
<p>仅删除表格中所有的数据</p>
<p><strong>Drop删除索引、表和数据库</strong></p>
<p>通过使用 DROP 语句，可以轻松地删除索引、表和数据库。</p>
<p>DROP DATABASE 数据库名称</p>
<p>DROP TABLE 表名称</p>
<p>删除索引</p>
<p>ALTER TABLE table_name DROP INDEX index_name</p>
<p><strong>Alter已有的表中添加、修改或删除列</strong></p>
<p>ALTER TABLE 语句用于在已有的表中添加、修改或删除列</p>
<p>在表中添加列</p>
<p>ALTER TABLE table_name ADD column_name datatype(数据类型)</p>
<p>删除表中的列</p>
<p>ALTER TABLE table_name  DROP COLUMN column_name</p>
<p>或</p>
<p>ALTER TABLE table_name ALTER COLUMN column_name datatype</p>
<p><strong>Top(limit)查询指定条数数据</strong></p>
<p><strong>Top语句支持sqlserver</strong></p>
<p>SELECT TOP number|percent column_name(s) FROM table_name</p>
<p>查询2条</p>
<p>SELECT TOP 2 * FROM Persons</p>
<p>查询50%的数据</p>
<p>SELECT TOP 50 PERCENT * FROM Persons</p>
<p><strong>limit语句支持Mysql</strong></p>
<p>SELECT column_name(s) FROM table_name LIMIT number</p>
<p>SELECT *FROM user LIMIT 5</p>
<p><strong>Oracle</strong></p>
<p>SELECT column_name(s) FROM table_name WHERE ROWNUM &lt;= number</p>
<p>SELECT *FROM user WHERE ROWNUM &lt;= 5</p>
<p><strong>Distinct 用于去重</strong></p>
<p>SELECT DISTINCT 列名称 FROM 表名称</p>
<p>SELECT DISTINCT Company FROM Orders<br><img src="/2018/06/03/sql/4.png" alt="img" loading="lazy"></p>
<p><strong>可以和WHERE一起使用的操作符</strong></p>
<p><strong>Like查询</strong></p>
<p>LIKE 操作符用于在 WHERE 子句中搜索列中的指定模式</p>
<p><strong>通配符</strong></p>
<table>
<thead>
<tr>
<th>%</th>
<th>替代一个或多个字符</th>
</tr>
</thead>
<tbody><tr>
<td>_</td>
<td>仅替代一个字符</td>
</tr>
<tr>
<td>[charlist]</td>
<td>字符列中的任何单一字符</td>
</tr>
<tr>
<td>[^charlist]或者[!charlist]</td>
<td>不在字符列中的任何单一字符</td>
</tr>
</tbody></table>
<p><strong>%通配符</strong></p>
<p>SELECT * FROM Persons WHERE City LIKE ‘%N%’</p>
<p>_<strong>通配符</strong></p>
<p>SELECT * FROM Persons WHERE FirstName LIKE ‘_eorge’</p>
<p>[charlist]<strong>通配符   以A/L/N任意字符开头的</strong></p>
<p>SELECT * FROM Persons WHERE City LIKE ‘[ALN]%’</p>
<p>[!charlist]  或 [^charlist]  不<strong>以A/L/N任意字符开头的</strong></p>
<p>SELECT * FROM Persons WHERE City LIKE ‘[!ALN]%’</p>
<p><strong>In操作符</strong></p>
<p>IN 操作符允许我们在 WHERE 子句中规定多个值。</p>
<p>SELECT column_name(s) FROM table_name WHERE column_name IN (value1,value2,…)</p>
<p>SELECT  * FROM <code>user</code> where userid IN (‘4’,’2’);</p>
<p><img src="/2018/06/03/sql/5.png" alt="img" loading="lazy"></p>
<p>SELECT  * FROM <code>user</code> where userid NOT IN (‘4’,’2’);</p>
<p><img src="/2018/06/03/sql/6.png" alt="img" loading="lazy"></p>
<p><strong>BETWEEN 操作符</strong></p>
<p>操作符 BETWEEN … AND 会选取介于两个<strong>值之间</strong>的数据范围。这些值可以是数值、文本或者日期。</p>
<p>SELECT column_name(s) FROM table_name WHERE column_name BETWEEN value1 AND value2</p>
<p>SELECT  * FROM <code>user</code> where userid BETWEEN 2 AND 4</p>
<p><img src="/2018/06/03/sql/7.png" alt="img" loading="lazy"></p>
<p>操作符 NOT BETWEEN … AND 会选取介于两个<strong>值之外</strong>的数据范围。这些值可以是数值、文本或者日期。</p>
<p>SELECT  * FROM <code>user</code> where userid <strong>NOT</strong> BETWEEN 2 AND 4</p>
<p><img src="/2018/06/03/sql/8.png" alt="img" loading="lazy"></p>
<p><strong>Alias 语法(别名)</strong></p>
<p><strong>表别名</strong></p>
<p>SELECT column_name(s) FROM table_name <strong>AS</strong> alias_name</p>
<p>SELECT  * FROM <code>user</code> <strong>AS</strong> u where <strong>u.userid</strong> NOT IN (‘4’,’2’); </p>
<p><strong>列别名</strong></p>
<p>SELECT userid <strong>AS</strong> uId FROM <code>user</code> </p>
<p><img src="/2018/06/03/sql/9.png" alt="img" loading="lazy"></p>
<p><strong>Join 操作符</strong> </p>
<p>根据两个或多个表中的列之间的关系，从这些表中查询数据</p>
<p><strong>INNER JOIN: 如果表中有至少一个匹配，则返回行</strong></p>
<p>SELECT <code>user</code>.userid,usermsg.username FROM user INNER JOIN usermsg ON <code>user</code>.userid=usermsg.userid</p>
<p><img src="/2018/06/03/sql/10.png" alt="img" loading="lazy"></p>
<p><strong>LEFT JOIN: 即使右表中没有匹配，也从左表返回所有的行</strong></p>
<p>SELECT <code>user</code>.userid,usermsg.username FROM user <strong>LEFT  JOIN</strong> usermsg <strong>ON</strong> <code>user</code>.userid=usermsg.userid</p>
<p><img src="/2018/06/03/sql/11.png" alt="img" loading="lazy"></p>
<p><strong>RIGHT JOIN: 即使左表中没有匹配，也从右表返回所有的行</strong></p>
<p>SELECT <code>user</code>.userid,usermsg.username FROM user <strong>Right</strong> JOIN usermsg ON <code>user</code>.userid=usermsg.userid</p>
<p><img src="/2018/06/03/sql/12.png" alt="img" loading="lazy"></p>
<p><strong>FULL JOIN: 只要其中一个表中存在匹配，就返回行</strong></p>
<p><strong>Union操作符(默认去重)</strong></p>
<p>UNION 操作符用于合并两个或多个 SELECT 语句的结果集。</p>
<p>UNION 内部的 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每条 SELECT 语句中的列的顺序必须相同。</p>
<p>SELECT column_name(s) FROM table_name1 UNION SELECT column_name(s) FROM table_name2</p>
<p>SELECT userid from <code>user</code>UNION SELECT userid from usermsg</p>
<p><img src="/2018/06/03/sql/13.png" alt="img" loading="lazy"></p>
<p><strong>UNION ALL(显示重复的数据)</strong></p>
<p>SELECT userid from <code>user</code></p>
<p>UNION ALL</p>
<p>SELECT userid from usermsg</p>
<p><img src="/2018/06/03/sql/14.png" alt="img" loading="lazy"></p>
<p><strong>SELECT INTO 语句</strong></p>
<p>SELECT INTO 语句从一个表中选取数据，然后把数据插入另一个表中。</p>
<p>SELECT INTO 语句常用于创建表的备份复件或者用于对记录进行存档</p>
<p>SELECT * INTO new_table_name [IN externaldatabase]  FROM old_tablename</p>
<p>SELECT column_name(s) INTO new_table_name [IN externaldatabase]  FROM old_tablename</p>
<p><strong>创建一个名为 “Persons_Order_Backup” 的新表，其中包含了从 Persons 和 Orders 两个表中取得的信息</strong></p>
<p>SELECT Persons.LastName,Orders.OrderNo INTO Persons_Order_Backup FROM Persons INNER JOIN Orders ON Persons.Id_P=Orders.Id_P</p>
<p><strong>从 “Persons” 表中提取居住在 “Beijing” 的人的信息，创建了一个带有两个列的名为 “Persons_backup” 的表</strong></p>
<p><strong>FOREIGN KEY 外键约束</strong></p>
<p><strong>CHECK 约束特定值约束</strong></p>
<p>用于限制列中的值的范围。</p>
<p>对单个列定义 CHECK 约束，那么该列只允许特定的值。</p>
<p>对一个表定义 CHECK 约束，那么此约束会在特定的列中对值进行限制。</p>
<p>表创建时</p>
<p>CHECK (Id_P&gt;0)</p>
<p>CONSTRAINT chk_Person(别名) CHECK (Id_P&gt;0 AND City=’Sandnes’)</p>
<p>表已经创建</p>
<p>ADD CHECK (Id_P&gt;0)</p>
<p>ADD CONSTRAINT chk_Person CHECK (Id_P&gt;0 AND City=’Sandnes’)</p>
<p>撤销check约束</p>
<p>ALTER TABLE Persons DROP CHECK chk_Person</p>
<p><strong>DEFAULT 约束</strong>设置默认值</p>
<p>创建表时</p>
<p>City varchar(255) DEFAULT ‘Sandnes’</p>
<p>OrderDate date DEFAULT GETDATE()</p>
<p>表已创建</p>
<p>ALTER TABLE Persons ALTER City SET DEFAULT ‘SANDNES’</p>
<p><strong>INDEX 语句用于在表中创建索引</strong></p>
<p><strong>不读取整个表的情况下，索引使数据库应用程序可以更快地查找数据</strong></p>
<p>创建一个简单的索引。允许使用重复的值</p>
<p>CREATE INDEX index_name ON table_name (column_name)</p>
<p>创建一个唯一的索引。唯一的索引意味着两个行不能拥有相同的索引值</p>
<p>CREATE UNIQUE INDEX index_name ON table_name (column_name)</p>
<p><em>降序</em>索引某个列中的值，您可以在列名称之后添加保留字 <em>DESC</em>：</p>
<p>CREATE INDEX PersonIndex ON Person (LastName DESC)</p>
<p>索引不止一个列，您可以在括号中列出这些列的名称，用逗号隔开：</p>
<p>CREATE INDEX PersonIndex ON Person (LastName, FirstName)</p>
<p><strong>Auto-increment操作符 自动生成唯一数字，自动递增</strong></p>
<p>会在新记录插入表中时生成一个唯一的数字</p>
<p><strong>Mysql</strong></p>
<p>CREATE TABLE Persons ( <strong>P_Id int NOT NULL AUTO_INCREMENT,</strong> LastName varchar(255) NOT NULL, FirstName varchar(255), Address varchar(255), City varchar(255), <strong>PRIMARY KEY (P_Id)</strong> )</p>
<p>ALTER TABLE Persons AUTO_INCREMENT=100 让初始值为100</p>
<p><strong>sqlserver</strong></p>
<p>MS SQL 使用 IDENTITY 关键字来执行 auto-increment 任务。</p>
<p>CREATE TABLE Persons ( P_Id int PRIMARY KEY IDENTITY, LastName varchar(255) NOT NULL, FirstName varchar(255), Address varchar(255), City varchar(255) )</p>
<p>IDENTITY(20,10) 20开头 每次递增10</p>
<p><strong>NULL 值</strong></p>
<p>SELECT LastName,FirstName,Address FROM Persons WHERE Address <strong>IS NULL</strong></p>
<p>SELECT LastName,FirstName,Address FROM Persons WHERE Address <strong>IS NOT NULL</strong></p>
<p><strong>Mysql</strong>  IFNULL()</p>
<p>IFNULL(字段名,0) 为null 则返回0</p>
<p>SELECT ProductName,UnitPrice*(UnitsInStock+IFNULL(UnitsOnOrder,0)) FROM Products</p>
<p>或者</p>
<p><strong>COALESCE(**UnitsOnOrder,0</strong>)**</p>
<p><strong>SQL Server</strong> ISNULL()</p>
<p>ISNULL(UnitsOnOrder,0)</p>
<p><strong>Oracle</strong>  NVL()</p>
<p>NVL(UnitsOnOrder,0)</p>
<p><strong>SQL函数</strong></p>
<p>SELECT function(列) FROM 表</p>
<p><strong>合计函数</strong>Aggregate 函数</p>
<p>操作面向一系列的值，并返回一个单一的值</p>
<p>AVG(column)     返回某列的平均值 </p>
<p>COUNT(column)     返回某列的行数（不包括NULL值）</p>
<p>COUNT(*)     返回被选行数</p>
<p>COUNT(DISTINCT column)     返回相异结果的数目</p>
<p>FIRST(column)     返回在指定的域中第一个记录的值（SQLServer2000 不支持）</p>
<p>LAST(column)     返回在指定的域中最后一个记录的值（SQLServer2000 不支持）</p>
<p>MAX(column)     返回某列的最高值</p>
<p>MIN(column)     返回某列的最低值</p>
<p>STDEV(column)      估算样本的标准偏差</p>
<p>STDEVP(column)      返回整个样本总体的标准偏差</p>
<p>SUM(column)     返回某列的总和</p>
<p>SELECT CONVERT(DateTime,’2011-07-11’)    –输出 2011-07-11 00:00:00.000   (类型转换) SELECT CAST(‘2011-07-11’ AS DateTime)    –输出 2011-07-11 00:00:00.000      (类型转换)</p>
<p>　　SELECT CONVERT(varchar,GETDATE(),<strong>5</strong>)    –输出 01-07-13 　SELECT CONVERT(varchar,GETDATE(),<strong>111</strong>)  –输出 2013/07/01 　SELECT CONVERT(varchar,GETDATE(),<strong>1</strong>)    –输出 07/01/13 　　SELECT CAST(GETDATE() AS varchar)    –输出 07 1 2013 9:56PM</p>
<p><strong>标量函数</strong>Scalar 函数</p>
<p>面向某个单一的值，并返回基于输入值的一个单一的值</p>
<p>UCASE(c)     将某个域转换为大写</p>
<p>LCASE(c)     将某个域转换为小写</p>
<p>MID(c,start[,end])     从某个文本域提取字符</p>
<p>LEN(c)     返回某个文本域的长度</p>
<p>INSTR(c,char)     返回在某个文本域中指定字符的数值位置</p>
<p>LEFT(c,number_of_char)     返回某个被请求的文本域的左侧部分</p>
<p>RIGHT(c,number_of_char)     返回某个被请求的文本域的右侧部分</p>
<p>ROUND(c,decimals)     对某个数值域进行指定小数位数的四舍五入</p>
<p>MOD(x,y)     返回除法操作的余数</p>
<p>NOW()     返回当前的系统日期</p>
<p>FORMAT(c,format)     改变某个域的显示方式</p>
<p>DATEDIFF(d,date1,date2)     用于执行日期计算</p>
<p><strong>AVG()</strong> AVG 函数返回数值列的平均值。NULL 值不包括在计算中</p>
<p>SELECT AVG(column_name) FROM table_name</p>
<p>SELECT Customer FROM Orders WHERE OrderPrice&gt;(SELECT AVG(OrderPrice) FROM Orders)</p>
<p><strong>COUNT()</strong>  COUNT() 函数返回匹配指定条件的行数</p>
<p><strong>COUNT(column_name) 语法</strong> 函数返回指定列的值的数目（NULL 不计入）</p>
<p>SELECT COUNT(column_name) FROM table_name</p>
<p><strong>COUNT(*) 语法</strong> 函数返回表中的记录数</p>
<p>SELECT COUNT(*) FROM table_name</p>
<p><strong>COUNT(DISTINCT column_name) 语法</strong>返回指定列的不同值的数目</p>
<p>SELECT COUNT(DISTINCT column_name) FROM table_name</p>
<p>**FIRST()**函数返回指定的字段中第一个记录的值</p>
<p>SELECT FIRST(column_name) FROM table_name</p>
<p><strong>LAST()</strong> 返回指定的字段中最后一个记录的值</p>
<p>SELECT LAST(column_name) FROM table_name</p>
<p>**MAX()**返回一列中的最大值。NULL 值不包括在计算中</p>
<p>SELECT MAX(column_name) FROM table_name</p>
<p>**MIN()**返回一列中的最小值。NULL 值不包括在计算中</p>
<p>SELECT MIN(column_name) FROM table_name</p>
<p>**SUM()**返回数值列的总数（总额）</p>
<p>SELECT SUM(column_name) FROM table_name</p>
<p><strong>UCASE()</strong> 字段的值转换为大写</p>
<p>SELECT UCASE(LastName) as LastName,FirstName FROM Persons</p>
<p>**LCASE()**把字段的值转换为小写</p>
<p>SELECT LCASE(LastName) as LastName,FirstName FROM Persons</p>
<p>**MID()**从文本字段中提取字符</p>
<p>SELECT MID(column_name,start,length) FROM table_name</p>
<p>SELECT MID(username,1,2) as midusrername  FROM usermsg </p>
<p><img src="/2018/06/03/sql/15.png" alt="img" loading="lazy"></p>
<p>**ROUND()**用于把数值字段舍入为指定的小数位数</p>
<p>SELECT ROUND(column_name,decimals (要返回的小数位数)) FROM table_name</p>
<p>**NOW()**返回当前的日期和时间。Sql Server  使用 getdate() 函数来获得当前的日期时间。</p>
<p>SELECT NOW() FROM table_name</p>
<p>**FORMAT()**对字段的显示进行格式化</p>
<p>SELECT FORMAT(column_name,format) FROM table_name</p>
<p>SELECT ProductName, UnitPrice, FORMAT(Now(),’YYYY-MM-DD’) as PerDate FROM Products</p>
<p>**LEN()**返回文本字段中值的长度</p>
<p>SELECT LEN(column_name) FROM table_name</p>
<p><strong>HAVING 子句</strong></p>
<p>having一般跟在group by之后，执行记录组选择的一部分来工作的。</p>
<p>where则是执行所有数据来工作的。</p>
<p>再者having可以用聚合函数，如having sum(qty)&gt;1000</p>
<p>WHERE 关键字无法与合计函数一起使用 使用having</p>
<p>SELECT Customer,SUM(OrderPrice) FROM Orders GROUP BY Customer HAVING SUM(OrderPrice)&lt;2000</p>
<p><strong>GROUP BY</strong></p>
<p><strong>合计函数 (比如 SUM) 常常需要添加 GROUP BY 语句</strong></p>
<p>SELECT column_name, aggregate_function(column_name) FROM table_name WHERE column_name operator value GROUP BY column_name</p>
<img src="/2018/06/03/sql/welcome.jpg" class title="This is an example image" loading="lazy"></div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200909134906564.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTgwMjMy,size_16,color_FFFFFF,t_70"><img loading="lazy" src="https://img-blog.csdnimg.cn/20200909134906564.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTgwMjMy,size_16,color_FFFFFF,t_70" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200909134954979.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTgwMjMy,size_16,color_FFFFFF,t_70"><img loading="lazy" src="https://img-blog.csdnimg.cn/20200909134954979.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTgwMjMy,size_16,color_FFFFFF,t_70" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200909135013280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTgwMjMy,size_16,color_FFFFFF,t_70"><img loading="lazy" src="https://img-blog.csdnimg.cn/20200909135013280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MTgwMjMy,size_16,color_FFFFFF,t_70" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>kabai</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="http://yoursite.com/2018/06/03/sql/" title="数据库sql相关">http://yoursite.com/2018/06/03/sql/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2018/06/16/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E4%B8%8E%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/" rel="prev" title="设计模式之策略与状态模式"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">设计模式之策略与状态模式</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2018/04/12/hello-world/" rel="next" title="Hello World"><span class="post-nav-text">Hello World</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>点击按钮跳转 GitHub Issues 评论。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/issues?q=is:issue+数据库sql相关">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2018 – 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> kabai</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.1.1</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.0.0</span></div><div class="live_time"><span>本站已运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2018-04-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>